{"version":3,"file":"index.esm.js","sources":["../src/ootb-state-indexing.ts"],"sourcesContent":["import * as Service from \"typescript-44ms-reactionary-template-method\";\n\nexport const ootbStateIndexingStack: Service.FactoryStateIndexing = () => {\n  let stateIndexes_filo: Record<symbol, number>[] = [];\n  const beginStateIndexesContext = () => {\n    stateIndexes_filo = [...[{}], ...stateIndexes_filo];\n  };\n  const endStateIndexesContext = () => {\n    stateIndexes_filo = stateIndexes_filo.slice(1);\n  };\n  const topOfTheStack = () => stateIndexes_filo[0];\n  const stateCounter = (ref: Symbol) => {\n    const thisContext = topOfTheStack();\n    if (\n      thisContext[ref.valueOf()] === undefined ||\n      thisContext[ref.valueOf()] === null\n    ) {\n      thisContext[ref.valueOf()] = -1;\n    }\n    thisContext[ref.valueOf()] = thisContext[ref.valueOf()] + 1;\n    return thisContext[ref.valueOf()];\n  };\n\n  return {\n    beginStateIndexesContext,\n    endStateIndexesContext,\n    stateCounter,\n  };\n};\n"],"names":["ootbStateIndexingStack","stateIndexes_filo","beginStateIndexesContext","endStateIndexesContext","slice","stateCounter","ref","thisContext","undefined","valueOf"],"mappings":"AAEO,MAAMA,EAAuD,KAClE,IAAIC,EAA8C,GAoBlD,MAAO,CACLC,yBApB+B,KAC/BD,EAAoB,CAAK,CAAE,KAAMA,EAAkB,EAoBnDE,uBAlB6B,KAC7BF,EAAoBA,EAAkBG,MAAM,EAAE,EAkB9CC,aAfoBC,IACpB,MAAMC,EAFoBN,EAAkB,GAU5C,YANiCO,IAA/BD,EAAYD,EAAIG,YACe,OAA/BF,EAAYD,EAAIG,aAEhBF,EAAYD,EAAIG,YAAc,GAEhCF,EAAYD,EAAIG,WAAaF,EAAYD,EAAIG,WAAa,EACnDF,EAAYD,EAAIG,UAAU,EAOlC"}