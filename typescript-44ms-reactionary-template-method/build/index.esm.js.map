{"version":3,"file":"index.esm.js","sources":["../src/reactionary-template-method.ts","../src/create-element.ts","../src/public-form-state-stack.ts","../node_modules/typescript-44ms/build/index.esm.js","../src/public-form.ts","../src/use-reacting-power.ts","../src/use-submit.ts","../src/work.ts"],"sourcesContent":["import { ReactingPower } from \"./reacting-power\";\nimport { FinalizedReactionaryBlueprint } from \"./reactionary-blueprint\";\nimport { ServiceClient } from \"./service-client\";\n\nexport const reactionaryTemplateMethod = (\n  blueprint: FinalizedReactionaryBlueprint\n) => {\n  const publicFormStateStack = blueprint.publicFormState();\n\n  const formRefStack = blueprint.refs(publicFormStateStack);\n  const [formRefs, formRefsIsland] = formRefStack;\n\n  const stateIndexingStack = blueprint.stateIndexing();\n\n  const sourceOfTruthStack = blueprint.sourceOfTruth(stateIndexingStack);\n  const {\n    sourceOfTruth,\n    sourceOfTruthEjectButton,\n    sourceOfTruthFromEjectedCartridge,\n  } = sourceOfTruthStack;\n\n  const [serviceController, explore, exploreFulfillment, employee, employMeAsAProducer] =\n    blueprint.serviceController(publicFormStateStack, formRefStack);\n\n  const service = blueprint.service(\n    formRefStack,\n    sourceOfTruthStack,\n    serviceController\n  );\n\n  const dom = blueprint.dom(\n    serviceController,\n    publicFormStateStack,\n    service.ViewModel\n  );\n\n  const [logicalContext, logicalContextController] = blueprint.logicalContext();\n\n  let reactingPower: ReactingPower = {\n    service,\n    sourceOfTruth,\n    sourceOfTruthEjectButton,\n    sourceOfTruthFromEjectedCartridge,\n    dom: dom.explorer,\n    logicalContext,\n  };\n  if (blueprint.reactingPower) {\n    reactingPower = blueprint.reactingPower(reactingPower);\n  }\n\n  const [createElement, runElementEffects, destroyElement] =\n    blueprint.createElement(\n      stateIndexingStack,\n      dom.virtualDomController,\n      logicalContextController,\n      reactingPower,\n      sourceOfTruthStack,\n      service.ViewModel.iAmReact\n    );\n\n  const [eventHandler, submitHandler] = blueprint.events(dom, reactingPower);\n\n  let client: ServiceClient = {\n    createElement,\n    runElementEffects,\n    destroyElement,\n    eventHandler,\n    submitHandler,\n    explore,\n    exploreFulfillment,\n    employee,\n    employMeAsAProducer,\n    nowish: publicFormStateStack.publicFormStateImmediate,\n    formRefs,\n    formRefsIsland,\n  };\n  if (blueprint.serviceClient) {\n    client = blueprint.serviceClient(client);\n  }\n  return client;\n};\n","import * as T44ms from \"typescript-44ms\";\n\nexport const createElement = <YourPropsType extends any>(\n  type: T44ms.Api.FunctionComponent<YourPropsType>,\n  props: Parameters<T44ms.Api.FunctionComponent<YourPropsType>>[0],\n  _ref?: Symbol\n) => {\n  return type(props);\n};\n","import * as t44ms from \"typescript-44ms\";\n\nimport { PublicForm } from \"./public-form\";\n\nexport interface PublicFormStateStack {\n  publicFormStateImmediate: () => PublicForm | null;\n  siphonPublicFinal: (\n    virtualStack: t44ms.Api.ref[],\n    value: any,\n    name?: string | typeof PublicFormStateStack_CrushKillDestroy\n  ) => void;\n  siphonPublicFulfillmentFinal: (\n    virtualStack: t44ms.Api.ref[],\n    value: any,\n    name?: string | typeof PublicFormStateStack_CrushKillDestroy\n  ) => void;\n  publicFulfillmentImmediate: () => PublicForm | null;\n}\n\nexport const PublicFormStateStack_CrushKillDestroy = Symbol.for(\n  \"react-44ms/service/crush-kill-destroy\"\n);\n","const e=Symbol.for(\"react-44ms/api/UseServiceSymbol\"),l=()=>window[e],r=Symbol.for(\"react-44ms/api/YieldablePortSymbol\"),a=e=>e?._yieldablePort===r,i=Symbol.for(\"react-44ms/api/RefSymbol\"),t=e=>!!e&&e._refSymbol===i,o={element:{name:e=>e},RefPrimitive:{on:e=>({[i]:`${e}`,_refSymbol:i})}},n=Symbol.for(\"react-44ms/api/YieldableHandlerSymbol\"),s=e=>e?._yieldableHandler===n,d=Symbol.for(\"react-44ms/api/YieldedValueSymbol\"),c=Symbol.for(\"react-44ms/api/YieldedValueNotFoundSymbol\"),u=e=>!!e&&e._yieldedValueSymbol===d,y=e=>u(e)?e[d]:c,m=e=>{const{useSubmit:r}=l();return r().submit(e)};m.NO_SUBMIT_FOUND_INVALID_FORM_REASON_KEY=Symbol.for(\"React44ms/FORM_SUBMIT_INVALID_NO_SUBMIT_KEY\");const b=Symbol.for(\"react-44ms/api/TypedRefSymbol\"),f=Symbol.for(\"react-44ms/api/TypedRefValueSymbol\");var S=Object.freeze({__proto__:null,Convenience:o,RefSymbol:i,TypedRefSymbol:b,TypedRefValueSymbol:f,Yield:e=>{const{useReactingPower:r}=l();return r().service.Reactionary.Yield(e)},YieldAValueAtTheEnd:e=>({[d]:e,_yieldedValueSymbol:d}),YieldableHandler:e=>({[n]:e,_yieldableHandler:n}),YieldableHandlerSymbol:n,YieldablePort:e=>({[r]:e,_yieldablePort:r}),YieldablePortSymbol:r,YieldedValueNotFoundSymbol:c,YieldedValueSymbol:d,anyRefishToStringValue:e=>t(e)?e[i]:e||\"\",anyYieldableHandlerToValue:e=>s(e)?e[n]:\"\",extractYieldedValue:y,extractYieldingRef:e=>{let l,r,i=[],o=c;if(Array.isArray(e)){const n=(e=(e=(e=e.filter((e=>!s(e)||(r=e,!1)))).filter((e=>!a(e)||(l=e,!1)))).filter((e=>!u(e)||(o=y(e),!1))))[e.length-1];t(n)||(o=n,e=e.slice(0,e.length-1)),i=e}else e&&(i=[e]);return{yieldingCallstackAdditions:i,yieldablePort:l,yieldableHandler:r,yieldedValue:o}},fulfill:{name:e=>e},isThatARef:t,isThatATypedRef:e=>!!e&&e._typedRefSymbol===b,isThatAYieldableHandler:s,isThatAYieldablePort:a,isThatAYieldedValuePrimitive:u,setYourService:l=>{window[e]=l},submit:m,useCallback:(e,r)=>{const{useReactingPower:a}=l();return a().service.Reactionary.useCallback(e,r)},useEffect:(e,r,a)=>{const{useReactingPower:i}=l();return i().service.Reactionary.useEffect(e,r,a)},useFormRefs:e=>{const{useReactingPower:r}=l();return r().service.Reactionary.useFormRefs(e)},useMemo:(e,r)=>{const{useReactingPower:a}=l();return a().service.Reactionary.useMemo(e,r)},useRef:e=>{const{useReactingPower:r}=l();return r().service.Reactionary.useRef(e)},useService:l,useState:e=>{const{useReactingPower:r}=l();return r().service.Reactionary.useState(e)}});const R=!0,_=!1;var Y=Object.freeze({__proto__:null,NoTheDependenciesAreNotTheSame:_,YesTheDependenciesAreTheSame:R,dependenciesVsDependencies:(e,l)=>{if(!e&&!l)return R;if(!e&&l)return _;if(e&&!l)return _;if(e&&l){if(e.length!=l.length)return _;const r=e.some(((e,r)=>!Object.is(e,l[r])));if(r)return _}return R}});export{Y as Always,S as Api};\n//# sourceMappingURL=index.esm.js.map\n","import * as t44ms from \"typescript-44ms\";\n\nexport interface PublicForm {\n  [key: string | number | symbol]: any;\n}\n\nexport const publicFormAccess = <\n  YourFormStateDescribingInterfaceType extends any\n>(\n  publicFormState: PublicForm | null,\n  ref: t44ms.Api.ref\n): YourFormStateDescribingInterfaceType | null => {\n  const literalCallstack = ref[t44ms.Api.RefSymbol].split(\".\");\n  let node = publicFormState;\n  literalCallstack.forEach((name) => {\n    if (name && name.length > 0) {\n      node = node?.[name];\n    }\n  });\n  return node as YourFormStateDescribingInterfaceType | null;\n};\n","import { ReactingPower } from \"./reacting-power\";\n\nexport const React44msReactingPowerSymbol = Symbol.for(\n  \"react-44ms/service/reacting-power\"\n);\n\nexport const useReactingPower = () => {\n  return (window as any)[\n    React44msReactingPowerSymbol\n  ] as ReactingPower;\n};\n","import * as t44ms from \"typescript-44ms\";\n\nexport const React44msUseSubmitSymbol = Symbol.for(\n  \"react-44ms/service/use-submit\"\n);\n\nexport const useSubmit = () => {\n  return (window as any)[React44msUseSubmitSymbol] as t44ms.Api.Submitter;\n};\n","export type Work = () => void;\n\nexport enum WorkDescription {\n  state = \"state\",\n  after_rendering = \"after_rendering\",\n}\n"],"names":["reactionaryTemplateMethod","blueprint","publicFormStateStack","publicFormState","formRefStack","refs","formRefs","formRefsIsland","stateIndexingStack","stateIndexing","sourceOfTruthStack","sourceOfTruth","sourceOfTruthEjectButton","sourceOfTruthFromEjectedCartridge","serviceController","explore","exploreFulfillment","employee","employMeAsAProducer","service","dom","ViewModel","logicalContext","logicalContextController","reactingPower","explorer","createElement","runElementEffects","destroyElement","virtualDomController","iAmReact","eventHandler","submitHandler","events","client","nowish","publicFormStateImmediate","serviceClient","type","props","_ref","PublicFormStateStack_CrushKillDestroy","Symbol","for","e","l","window","r","a","_yieldablePort","i","t","_refSymbol","o","element","name","RefPrimitive","on","n","s","_yieldableHandler","d","c","u","_yieldedValueSymbol","y","m","useSubmit","submit","NO_SUBMIT_FOUND_INVALID_FORM_REASON_KEY","b","f","S","Object","freeze","__proto__","Convenience","RefSymbol","TypedRefSymbol","TypedRefValueSymbol","Yield","useReactingPower","Reactionary","YieldAValueAtTheEnd","YieldableHandler","YieldableHandlerSymbol","YieldablePort","YieldablePortSymbol","YieldedValueNotFoundSymbol","YieldedValueSymbol","anyRefishToStringValue","anyYieldableHandlerToValue","extractYieldedValue","extractYieldingRef","Array","isArray","filter","length","slice","yieldingCallstackAdditions","yieldablePort","yieldableHandler","yieldedValue","fulfill","isThatARef","isThatATypedRef","_typedRefSymbol","isThatAYieldableHandler","isThatAYieldablePort","isThatAYieldedValuePrimitive","setYourService","useCallback","useEffect","useFormRefs","useMemo","useRef","useService","useState","publicFormAccess","ref","literalCallstack","t44ms","split","node","forEach","React44msReactingPowerSymbol","React44msUseSubmitSymbol","WorkDescription"],"mappings":"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"}