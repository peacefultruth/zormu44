const e=Symbol.for("react-44ms/api/UseServiceSymbol"),t=Symbol.for("react-44ms/api/YieldablePortSymbol"),r=Symbol.for("react-44ms/api/RefSymbol"),n=e=>!!e&&e._refSymbol===r,l=e=>n(e)?e[r]:e||"",o=Symbol.for("react-44ms/api/YieldableHandlerSymbol"),s=e=>e?._yieldableHandler===o,i=Symbol.for("react-44ms/api/YieldedValueSymbol"),c=Symbol.for("react-44ms/api/YieldedValueNotFoundSymbol"),a=e=>!!e&&e._yieldedValueSymbol===i,u=e=>{let r,l,o=[],u=c;if(Array.isArray(e)){const f=(e=(e=(e=e.filter((e=>!s(e)||(l=e,!1)))).filter((e=>e?._yieldablePort!==t||(r=e,!1)))).filter((e=>{return!a(e)||(u=a(t=e)?t[i]:c,!1);var t})))[e.length-1];n(f)||(u=f,e=e.slice(0,e.length-1)),o=e}else e&&(o=[e]);return{yieldingCallstackAdditions:o,yieldablePort:r,yieldableHandler:l,yieldedValue:u}},f=t=>{const{useSubmit:r}=window[e];return r().submit(t)};f.NO_SUBMIT_FOUND_INVALID_FORM_REASON_KEY=Symbol.for("React44ms/FORM_SUBMIT_INVALID_NO_SUBMIT_KEY");const h=Symbol.for("react-44ms/api/TypedRefSymbol"),m=Symbol.for("react-44ms/api/TypedRefValueSymbol"),d=!1,p=(e,t)=>{if(!e&&!t)return true;if(!e&&t)return d;if(e&&!t)return d;if(e&&t){if(e.length!=t.length)return d;if(e.some(((e,r)=>!Object.is(e,t[r]))))return d}return true},b=Symbol.for("react-44ms/service/crush-kill-destroy"),_=(e,t)=>{const n=t[r].split(".");let l=e;return n.forEach((e=>{e&&e.length>0&&(l=l?.[e])})),l},y=Symbol.for("react-44ms/service/reacting-power"),E=()=>window[y],O=Symbol.for("react-44ms/service/use-submit");let S;!function(e){e.state="state",e.after_rendering="after_rendering"}(S||(S={}));const g=(e,t,n,l,o,s)=>{const{beginStateIndexesContext:i,endStateIndexesContext:c}=e,a=(e,o,s)=>{(e=>{n.begin_context(l.logicalContext,e),i(),window[y]=l,t.begin_context(e)})(s),t.createElement(e,o);const c=e({...o,ref:s[r]});u(c);return(c?.props?.children?Array.isArray(c.props.children)?c.props.children:[c.props.children]:[]).forEach((e=>{if(e&&e.type instanceof Function){const t=e.props,n=e.ref,l=e.type,o={[r]:`${s[r]}.${n}`,_refSymbol:r};a(l,t,o)}})),c},u=e=>{const o=t.end_context(e);o.lastExplicitChildren?.forEach((e=>{if(!o.latestExplicitChildren?.includes(e)){const t={[r]:`${o.ref[r]}.${e}`,_refSymbol:r};f(t)}})),n.end_context(l.logicalContext),c(),window[y]=void 0},f=e=>{t.crush_kill_destroy(e),o.crushKillDestroy(s,e)};return[a,e=>{window[y]=l,t.effects(),window[y]=void 0},f]},v=(e,t)=>{const r=e.map((e=>l(e).split("."))).flat();let n=t;return r.forEach((e=>{if(e.length>0){const t=n?.children[e];n=t}})),n},w=(e,r)=>{let n=[],l=[];[r,...r?.props?.children?Array.isArray(r.props.children)?r.props.children:[r.props.children]:[]].forEach((e=>{if(e){if("form"===e.type){const t={name:e.props.name,onSubmit:e.props.React44ms_onSubmit};l=[...l,t]}if("input"===e.type&&e.props.React44ms_onChange){const t={name:e.props.name,onChange:e.props.React44ms_onChange};Object.keys(e.props).forEach((r=>{r.startsWith("on")&&r.length>"on".length&&e.props[r]instanceof Function&&(t[r]=e.props[r])})),n=[...n,t]}e.type}}));return{handleEvent:e=>{const r=(e=>{let r;if(e){const l=n.find((r=>r.name===e[t]));l&&(r=l)}else{const e=n.find((e=>!e.name));e&&(r=e);const t=n.length>0?n[0]:void 0;!r&&t&&(r=t)}return r})(e.yieldablePort);var l;let i=(l=e.yieldableHandler,s(l)?l[o]:"");const a=!i||i.length<1,u=e.yieldedValue!==c;if(a&&u&&(i="onChange"),"onChange"===i){const t=r?.onChange;t?.({target:{value:e.yieldedValue}})}else{const e=r?.[i];e?.()}},handleSubmit:(r,n)=>{const o=(e=>{let r=[];if(e){const n=l.find((r=>r.name===e[t]));n&&(r=[...r,n])}else r=[...l];return r})(r.yieldablePort),s={expect:e};o.forEach((e=>{try{e.onSubmit?.(s)}catch(t){n(t,e.name)}}))}}},A=(e,t,r,n)=>{const l=v(r,n);l.rendered=t,l.gateway=w(e,t),l.latestOutputs&&(l.lastOutputs=l.latestOutputs,l.latestOutputs=void 0),l.latestFulfillment&&(l.lastFulfillment=l.latestFulfillment,l.latestFulfillment=void 0),l.latestExplicitChildren&&(l.lastExplicitChildren=l.latestExplicitChildren,l.latestExplicitChildren=null);const o=M(t);return l.latestOutputs=o,l.latestFulfillment=(e=>{let t={};return(e?.props?.children?Array.isArray(e.props.children)?e.props.children:[e.props.children]:[]).forEach((e=>{if(e&&"fulfill"===e.type){const r={[e.props.name]:e.props.handler};t={...t,...r}}})),t})(t),l.latestExplicitChildren=(e=>{let t=[];return(e?.props?.children?Array.isArray(e.props.children)?e.props.children:[e.props.children]:[]).forEach((e=>{if(e&&e.type instanceof Function){const r=e.ref;t=[...t,r]}})),t})(t),l},M=e=>{let t=[];return(e?.props?.children?Array.isArray(e.props.children)?e.props.children:[e.props.children]:[]).forEach((e=>{if(e&&"output"===e.type){const r={name:e.props.name,value:e.props.React44ms_value};t=[...t,r]}})),t},C=(e,t,r,n,l)=>{if(l===b)return t(n,void 0,b),void r(n,void 0,b);(l.lastOutputs||[]).forEach((e=>{(l.latestOutputs||[]).find((t=>t.name===e.name))||t(n,b,e.name)})),(l.latestOutputs||[]).forEach((e=>{const r=(l.lastOutputs||[]).find((t=>t.name===e.name));r&&r?.value===e.value||t(n,e.value,e.name)})),Object.entries(l.lastFulfillment||{}).forEach((e=>{const[t]=e;Object.entries(l.latestFulfillment||{}).find((([e])=>e===t))||r(n,b,t)})),Object.entries(l.latestFulfillment||{}).forEach((e=>{const[t,o]=e,s=(l.lastFulfillment||{})[t];s&&s===o||r(n,o,t)}))},k=(e,t,n)=>{const{publicFormStateImmediate:o,siphonPublicFinal:s,siphonPublicFulfillmentFinal:i}=t,c=(e,t)=>_(o(),e)||t;let a=null,u=[],f=[];const h={begin_context:e=>{f=[...e?[e]:[],...f],n.work_reconcile_state()},createElement:(e,t)=>{if(!a){const e={[r]:`${[].join(".")}`,_refSymbol:r};a={children:{},ref:e,latestExplicitChildren:null,lastExplicitChildren:null}}const n=((e,t)=>{const n=e.map((e=>l(e).split("."))).flat();let o=t;return n.forEach(((e,t)=>{if(!o.children[e]){const l={children:{},ref:{[r]:`${n.slice(0,t+1).join(".")}`,_refSymbol:r},lastExplicitChildren:null,latestExplicitChildren:null};o.children[e]=l}o=o.children[e]})),o})(f,a);n.type=e,n.props=t},end_context:t=>{const o=A(c,t,f,a);let h=[];let m=[];C(0,((e,t,r)=>{const n=[...e];h=[...h,()=>{s(n,t,r)}]}),((e,t,r)=>{const n=[...e];m=[...m,()=>{i(n,t,r)}]}),f,o);const d=[...f];return u=[...u,()=>{n.work_after_rendering()},()=>{n.work_reconcile_state()},()=>{if(h.forEach((e=>{e()})),h.length>0){const t=d.map((e=>l(e).split("."))).flat(),n={[r]:`${t.join(".")}`,_refSymbol:r};e.public_form_state_ready(n)}if(m.forEach((e=>{e()})),m.length>0){const t=d.map((e=>l(e).split("."))).flat(),n={[r]:`${t.join(".")}`,_refSymbol:r};e.public_form_fulfillment_ready(n)}}],f=f.slice(1),o},effects:()=>{const e=u;u=[],e.forEach((e=>{e()}))},crush_kill_destroy:t=>{if(!a)return;((e,t)=>{const r=[e].map((e=>l(e).split("."))).flat();let n=t;r.forEach(((e,t)=>{t===r.length-1?delete n.children[e]:n=n.children[e]}))})(t,a);let r=[];let n=[];C(0,((e,t,n)=>{const l=[...e];r=[...r,()=>{s(l,t,n)}]}),((e,t,r)=>{const l=[...e];n=[...n,()=>{i(l,t,r)}]}),[t],b);u=[...u,()=>{r.forEach((e=>{e()})),r.length>0&&e.public_form_state_ready(t),n.forEach((e=>{e()})),n.length>0&&e.public_form_fulfillment_ready(t)}]}};return{explorer:(e,t)=>{if(!a)return null;const r=[...t||[]],n=v(r,a)?.gateway;return n||null},exploreRefs:e=>{if(!a)return null;const t=v([e],a);return t||null},virtualDomController:h,giveCurrentRefStack:()=>f}},R=(e,t)=>[e=>{const r=u(e);t.dom(null,r.yieldingCallstackAdditions)?.handleEvent(r)},t=>{const r=u(t),{reasons_this_form_is_invalid:n}=F(e,r);return{reasons_this_form_is_invalid:n}}],F=(e,t,n=0)=>{if(!t){return{reasons_this_form_is_invalid:{[f.NO_SUBMIT_FOUND_INVALID_FORM_REASON_KEY]:"Cannot handle submit without a starting point. Please provide a ref."},submissions:{}}}const o={[r]:t.yieldingCallstackAdditions.map((e=>l(e).split("."))).flat().join("."),_refSymbol:r},s=e.exploreRefs(o);if(!s){return{reasons_this_form_is_invalid:{[f.NO_SUBMIT_FOUND_INVALID_FORM_REASON_KEY]:"Cannot handle submit without a starting point. Please provide a ref to something valid."},submissions:{}}}let i={};const c={submit:e=>{if(!e)throw new Error("Cannot submit an invalid submission!");i={...i,[`${o[r]}`]:!!e}}};window[O]=c;let a={};s.gateway?.handleSubmit(t,((e,t)=>{const n=`${o[r]}${t?`.${t}`:""}`;a[n]=e?`${e}`:`${new Error("Unknown error.")}`})),window[O]=null,Object.entries(s.children).forEach((([l])=>{if(!l||l.trim().length<1)return;const s={[r]:`${o[r]}.${l}`,_refSymbol:r},c={...t,yieldingCallstackAdditions:[s]},{reasons_this_form_is_invalid:u,submissions:f}=F(e,c,n+1);a={...a,...u},i={...i,...f}})),0===n&&Object.keys(i).length<1&&(a={...a,[f.NO_SUBMIT_FOUND_INVALID_FORM_REASON_KEY]:"Nothing submitted yet."});let u=null;return(Object.keys(a).length>0||a[f.NO_SUBMIT_FOUND_INVALID_FORM_REASON_KEY])&&(u=a),{reasons_this_form_is_invalid:u,submissions:i}},x=e=>{const{publicFormStateImmediate:t}=e,n=Symbol.for("somethingYetToExist"),o={},s=e=>{const l=Array.isArray(e)?e:e?[e]:[];return new Proxy(o,{get:(e,o)=>{if(o===r)return`${l.join(".")}`;if("_refSymbol"===o)return r;if(o===n)return l;if(o===h){return{[r]:`${l.join(".")}`,_refSymbol:r}}if(o===m)return n;if("typedRef"===o){const e={[r]:`${l.join(".")}`,_refSymbol:r};return{...e,[h]:e,[m]:n,_typedRefSymbol:h}}const i=t()||{},c=[...l,o];let a;if(c.forEach(((e,t)=>{a=a&&a!==n&&e in a?a[e]:0===t&&e in i?i[e]:n})),"object"==typeof a||a===n)return s(c);return{[r]:`${c.join(".")}`,_refSymbol:r}}})},i=s();return[i,e=>{const t=[e||i].map((e=>l(e).split("."))).flat();let r=i;return t.forEach((e=>{e&&e.length>0&&(r=r?.[e])})),r}]},I=()=>{let e=[];const t=()=>{const t=e.length>0?e[0]:void 0;return t?(t.value=t.value+1,t.value):-1},n={begin_context:(n,l)=>{const o=t();e=[{value:-1},...e],n.callStack=[...l?[l]:[],...n.callStack];const s={[r]:`__ImplicitReferenceToElement_${o}`,_refSymbol:r};n.elementStack=[...l?[l]:[s],...n.elementStack]},end_context:e=>{e.elementStack=e.elementStack.slice(1),e.callStack=e.callStack.slice(1)}};return[{callStack:[],elementStack:[]},n]},j=()=>{let e=null,t=null;return{publicFormStateImmediate:()=>e,siphonPublicFinal:(t,r,n)=>{e||(e={});const o=t.map((e=>l(e).split("."))).flat();let s=e,i=null,c=null;const a=o.length-1;o.forEach(((t,l)=>{if(l===a)n===b||(n?t.length>0?(s[t]||(s[t]={}),s[t][n]=r):i?i[c][n]=r:e[n]=r:t.length>0?"object"==typeof s[t]?s[t]={...s[t],...r}:s[t]=r:i?i[c]={...s,...r}:e={...e,...r});else if(t.length>0){if(!s[t]){const e={};s[t]=e}}else i&&(i[c]={});t.length>0?(i=s,c=t,s=s[t]):s=e})),n&&r===b&&(i?delete i[c][n]:e=null),n===b&&(i?delete i[c]:e=null)},siphonPublicFulfillmentFinal:(r,n,o)=>{t||(t={});const s=r.map((e=>l(e).split("."))).flat();let i=t,c=null,a=null;const u=s.length-1;s.forEach(((r,l)=>{if(l===u)o===b||(o?r.length>0?(i[r]||(i[r]={}),i[r][o]=n):c?c[a][o]=n:e[o]=n:r.length>0?"object"==typeof i[r]?i[r]={...i[r],...n}:i[r]=n:c?c[a]={...i,...n}:e={...e,...n});else if(r.length>0){if(!i[r]){const e={};i[r]=e}}else c&&(c[a]={});r.length>0?(c=i,a=r,i=i[r]):i=t})),o&&n===b&&(c?delete c[a][o]:t=null),o===b&&(c?delete c[a]:t=null)},publicFulfillmentImmediate:()=>t}},T=Symbol.for("react-44ms/service/ootb-t44ms.Api.Reactionary/useState_sourceOfTruth_symbol"),N=Symbol.for("react-44ms/service/ootb-t44ms.Api.Reactionary/useMemo_sourceOfTruth_symbol"),$=Symbol.for("react-44ms/service/ootb-reactionary/useEffect_sourceOfTruth_symbol"),D=Symbol.for("react-44ms/service/ootb-t44ms.Api.Reactionary/useCallback_sourceOfTruth_symbol"),V=Symbol.for("react-44ms/service/ootb-t44ms.Api.Reactionary/useRef_sourceOfTruth_symbol"),P=(e,t,{work_required_here:n})=>{const[l,o]=e;let s={},i=!1;let c=[],a=[];const f={add_work:(e,t,r=S.state)=>{switch(r){case S.state:c=[...c,t],n(e);break;case S.after_rendering:a=[...a,t]}},"what!?":()=>s,"HEY!LİSTEN!":()=>{i=!0},formRefs:l,formRefsIsland:o,sourceOfTruthOnCrushKillDestroy:t.sourceOfTruthOnCrushKillDestroy},h=(e=>t=>e.formRefsIsland(t))(f),m=(e=>t=>{const n=E(),l=n.sourceOfTruthEjectButton(e,T),o=n.sourceOfTruthFromEjectedCartridge(e,l),s=t=>{o.value=t;const n={[r]:`${l.callstack.join(".")}`,_refSymbol:r};e["HEY!LİSTEN!"](n)};o.fresh&&s(t);const i={[r]:`${l.callstack.join(".")}`,_refSymbol:r};return[o.value,t=>{e.add_work(i,(()=>{s(t)}))}]})(f),b=(e=>t=>{const r=E(),n=r.sourceOfTruthEjectButton(e,V),l=r.sourceOfTruthFromEjectedCartridge(e,n);return l.fresh&&(l.value=t),new Proxy({},{get:(e,t)=>{if("current"===t)return l.value},set:(e,t,r)=>("current"===t&&(l.value=r),!0)})})(f),_=(e=>(t,n)=>{const l=E(),o=l.sourceOfTruthEjectButton(e,N),s=l.sourceOfTruthFromEjectedCartridge(e,o),i=p(s.value?.memoizedDependencies,n);if(s.fresh||i===d){const l={memoizedValue:t(),memoizedDependencies:n};s.value=l;const i={[r]:`${o.callstack.join(".")}`,_refSymbol:r};e["HEY!LİSTEN!"](i)}return s.value.memoizedValue})(f),y=(e=>(t,n)=>{const l=E(),o=l.sourceOfTruthEjectButton(e,D),s=l.sourceOfTruthFromEjectedCartridge(e,o),i=p(s.value?.memoizedDependencies,n);if(s.fresh||i===d){const i={memoizedValue:t,memoizedProxy:new Proxy(t,{apply:function(t,r,n){const s=l.sourceOfTruthFromEjectedCartridge(e,o).value?.memoizedValue;return s?.apply(null,n)}}),memoizedDependencies:n};s.value=i;const c={[r]:`${o.callstack.join(".")}`,_refSymbol:r};e["HEY!LİSTEN!"](c)}return s.value?.memoizedProxy})(f),O=(e=>(e.sourceOfTruthOnCrushKillDestroy($,(e=>{e.forEach((e=>{e.afterlife?.()}))})),(t,n,l)=>{const o=E(),s=o.sourceOfTruthEjectButton(e,$),i=o.sourceOfTruthFromEjectedCartridge(e,s),c=p(i.value?.memoizedDependencies,n);if(i.fresh||c===d){const c=i.value?.afterlife,a=()=>{if(c?.(),l?.debounce){const r=setTimeout((()=>{const r=t();if(r){const t=o.sourceOfTruthFromEjectedCartridge(e,s).value;t&&(t.afterlife=r)}else{const t=o.sourceOfTruthFromEjectedCartridge(e,s).value;t&&delete t.afterlife}}),l.debounce),c={memoizedDependencies:n,afterlife:()=>{clearTimeout(r)}};i.value=c}else{const e=t(),r={memoizedDependencies:n};e&&(r.afterlife=e),i.value=r}},u={[r]:`${s.callstack.join(".")}`,_refSymbol:r};e.add_work(u,a,S.after_rendering)}}))(f),g=(e=>t=>{const n=E(),l=u(t),o={[r]:`${l.yieldingCallstackAdditions.map((e=>e[r])).join(".")}`,_refSymbol:r};e.add_work(o,(()=>{n.dom(e,l.yieldingCallstackAdditions)?.handleEvent(l)}),S.state)})(f);return{Reactionary:{useFormRefs:h,useState:m,useRef:b,useMemo:_,useCallback:y,useEffect:O,Yield:g},ViewModel:{work_reconcile_state:()=>{const e=c;c=[],e.forEach((e=>{e()}))},work_after_rendering:()=>{const e=a;a=[],e.forEach((e=>{e()}))},nowish:()=>(i&&(s={...s}),s),"NEVEERRRRRRRRRRRRRRR!":s,iAmReact:f}}},Y=(e,t)=>{const[n]=t;let l=[];let o=[];let s=[];let i=[];const c=t=>{let l=[];const o=t[r].split(".");s.forEach((e=>{const{whereAmI:t}=e,s=(t||n)[r].split(".");let i=0,c=!1;if(o.forEach((e=>{if(c)return;const t=s.shift(),r=e.length<1,n=(t?.length||0)<1;if(r||n){if(!(r&&n))return void(c=!0)}else if(e!==t)return void(c=!0);i+=1})),i>0){const t={subscriber:e,howMuchOfAMatch:i};l=[...l,t]}}));const i=l.sort(((e,t)=>t.howMuchOfAMatch-e.howMuchOfAMatch)),c=i[0];if(!c)return;i.filter((e=>e.howMuchOfAMatch===c.howMuchOfAMatch)).forEach((t=>{const r=_(e.publicFormStateImmediate(),t.subscriber.whereAmI||n);t.subscriber.subscriber(r)}))},a=t=>{let l=[];const o=t[r].split(".");i.forEach((e=>{const{whereAmI:t}=e,s=(t||n)[r].split(".");let i=0,c=!1;if(o.forEach((e=>{if(c)return;const t=s.shift(),r=e.length<1,n=(t?.length||0)<1;if(r||n){if(!(r&&n))return void(c=!0)}else if(e!==t)return void(c=!0);i+=1})),i>0){const t={subscriber:e,howMuchOfAMatch:i};l=[...l,t]}}));const s=l.sort(((e,t)=>t.howMuchOfAMatch-e.howMuchOfAMatch)),c=s[0];if(!c)return;s.filter((e=>e.howMuchOfAMatch===c.howMuchOfAMatch)).forEach((t=>{const l=(t=>{const n=t[r].split(".");let l=e.publicFulfillmentImmediate();return n.forEach((e=>{e&&e.length>0&&(l=l?.[e])})),l})(t.subscriber.whereAmI||n);t.subscriber.subscriber(l)}))};return[{work_required_here:e=>{(e=>{let t=[];const o=e[r].split(".");l.forEach((e=>{const{whereAmI:l}=e,s=(l||n)[r].split(".");let i=0,c=!1;if(o.forEach((e=>{if(c)return;const t=s.shift();if(""===e||""===t){if(""!==e||""!==t)return void(c=!0)}else if(e!==t)return void(c=!0);i+=1})),i>0){const r={subscriber:e,howMuchOfAMatch:i};t=[...t,r]}}));const s=t.sort(((e,t)=>t.howMuchOfAMatch-e.howMuchOfAMatch)),i=s[0];if(!i)return;s.filter((e=>e.howMuchOfAMatch===i.howMuchOfAMatch)).forEach((e=>{e.subscriber.subscriber()}))})(e),(e=>{let t=[];const l=e[r].split(".");o.forEach((e=>{const{whereAmI:o}=e,s=(o||n)[r].split(".");let i=0,c=!1;if(l.forEach((e=>{if(c)return;const t=s.shift();if(""===e||""===t){if(""!==e||""!==t)return void(c=!0)}else if(e!==t)return void(c=!0);i+=1})),i>0){const r={subscriber:e,howMuchOfAMatch:i};t=[...t,r]}}));const s=t.sort(((e,t)=>t.howMuchOfAMatch-e.howMuchOfAMatch)),i=s[0];if(!i)return;s.filter((e=>e.howMuchOfAMatch===i.howMuchOfAMatch)).forEach((e=>{e.subscriber.subscriber()}))})(e)},public_form_state_ready:c,public_form_fulfillment_ready:a},(e,t)=>{const r={subscriber:e,whereAmI:t};s=[...s,r],c(t||n);const l={unsubscribing:()=>{s=s.filter((e=>e!==r))}};return l},(e,t)=>{const r={subscriber:e,whereAmI:t};i=[...i,r],a(t||n);const l={unsubscribing:()=>{i=i.filter((e=>e!==r))}};return l},(e,t)=>{const r={subscriber:e,whereAmI:t};l=[...l,r];const n={unsubscribing:()=>{l=l.filter((e=>e!==r))}};return n},(e,t)=>{const r={subscriber:e,whereAmI:t};o=[...o,r];const n={unsubscribing:()=>{o=o.filter((e=>e!==r))}};return n}]},U=e=>{const t=(e,t)=>{const{callstack:n}=t;let l=e["what!?"]();n.forEach(((t,o)=>{if(!l[t]){const s={};l[t]=s;const i={[r]:`${n.slice(0,o+1).join(".")}`,_refSymbol:r};e["HEY!LİSTEN!"](i)}l=l[t]}));return l};let n=[];const o=(e,t)=>{let s=e["what!?"]();const i=l(t).split(".");i.forEach(((t,l)=>{if(s){if(l===i.length-1&&s.hasOwnProperty(t)){const l=s[t];Object.keys(l).forEach((t=>{const n={[r]:`${[...i,t].join(".")}`,_refSymbol:r};o(e,n)})),c=s[t],n.forEach((e=>{const[t,r]=e;r(c[t]?.fifo_state_stack||[])})),delete s[t]}var c;s=s[t]}}))},s=(e,r)=>{const{thisStateIndex:n,thisStateSymbol:l}=r;return new Proxy({},{get:(o,s)=>{const i=t(e,r);return"value"===s?i[l.valueOf()]?.fifo_state_stack?.[n]:"fresh"===s?(i[l.valueOf()]?.fifo_state_stack?.length||0)===n:void 0},set:(o,s,i)=>{const c=t(e,r);if("value"===s){if(!c[l.valueOf()]){const e={fifo_state_stack:[]};c[l.valueOf()]=e}c[l.valueOf()].fifo_state_stack[n]=i}return!0}})},i=(t,r,n)=>({callstack:[...n||[],...E().logicalContext.elementStack].map((e=>l(e).split("."))).flat(),thisStateIndex:e.stateCounter(r.valueOf()),thisStateSymbol:r});return{sourceOfTruth:(e,t,r)=>{const n=i(0,t,r);return s(e,n)},sourceOfTruthEjectButton:i,sourceOfTruthFromEjectedCartridge:s,crushKillDestroy:o,sourceOfTruthOnCrushKillDestroy:(e,t)=>{const r=[e.valueOf(),t];n=[...n,r]}}},z=()=>{let e=[];return{beginStateIndexesContext:()=>{e=[{},...e]},endStateIndexesContext:()=>{e=e.slice(1)},stateCounter:t=>{const r=e[0];return void 0!==r[t.valueOf()]&&null!==r[t.valueOf()]||(r[t.valueOf()]=-1),r[t.valueOf()]=r[t.valueOf()]+1,r[t.valueOf()]}}},B=()=>({publicFormState:j,refs:x,serviceController:Y,service:P,stateIndexing:z,sourceOfTruth:U,dom:k,logicalContext:I,createElement:g,events:R});export{B as ootb};
//# sourceMappingURL=index.esm.js.map
