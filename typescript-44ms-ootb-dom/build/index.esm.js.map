{"version":3,"file":"index.esm.js","sources":["../node_modules/typescript-44ms/build/index.esm.js","../node_modules/typescript-44ms-reactionary-template-method/build/index.esm.js","../src/ootb-dom.ts"],"sourcesContent":["const e=Symbol.for(\"react-44ms/api/UseServiceSymbol\"),l=()=>window[e],r=Symbol.for(\"react-44ms/api/YieldablePortSymbol\"),a=e=>e?._yieldablePort===r,i=Symbol.for(\"react-44ms/api/RefSymbol\"),t=e=>!!e&&e._refSymbol===i,o={element:{name:e=>e},RefPrimitive:{on:e=>({[i]:`${e}`,_refSymbol:i})}},n=Symbol.for(\"react-44ms/api/YieldableHandlerSymbol\"),s=e=>e?._yieldableHandler===n,d=Symbol.for(\"react-44ms/api/YieldedValueSymbol\"),c=Symbol.for(\"react-44ms/api/YieldedValueNotFoundSymbol\"),u=e=>!!e&&e._yieldedValueSymbol===d,y=e=>u(e)?e[d]:c,m=e=>{const{useSubmit:r}=l();return r().submit(e)};m.NO_SUBMIT_FOUND_INVALID_FORM_REASON_KEY=Symbol.for(\"React44ms/FORM_SUBMIT_INVALID_NO_SUBMIT_KEY\");const b=Symbol.for(\"react-44ms/api/TypedRefSymbol\"),f=Symbol.for(\"react-44ms/api/TypedRefValueSymbol\");var S=Object.freeze({__proto__:null,Convenience:o,RefSymbol:i,TypedRefSymbol:b,TypedRefValueSymbol:f,Yield:e=>{const{useReactingPower:r}=l();return r().service.Reactionary.Yield(e)},YieldAValueAtTheEnd:e=>({[d]:e,_yieldedValueSymbol:d}),YieldableHandler:e=>({[n]:e,_yieldableHandler:n}),YieldableHandlerSymbol:n,YieldablePort:e=>({[r]:e,_yieldablePort:r}),YieldablePortSymbol:r,YieldedValueNotFoundSymbol:c,YieldedValueSymbol:d,anyRefishToStringValue:e=>t(e)?e[i]:e||\"\",anyYieldableHandlerToValue:e=>s(e)?e[n]:\"\",extractYieldedValue:y,extractYieldingRef:e=>{let l,r,i=[],o=c;if(Array.isArray(e)){const n=(e=(e=(e=e.filter((e=>!s(e)||(r=e,!1)))).filter((e=>!a(e)||(l=e,!1)))).filter((e=>!u(e)||(o=y(e),!1))))[e.length-1];t(n)||(o=n,e=e.slice(0,e.length-1)),i=e}else e&&(i=[e]);return{yieldingCallstackAdditions:i,yieldablePort:l,yieldableHandler:r,yieldedValue:o}},fulfill:{name:e=>e},isThatARef:t,isThatATypedRef:e=>!!e&&e._typedRefSymbol===b,isThatAYieldableHandler:s,isThatAYieldablePort:a,isThatAYieldedValuePrimitive:u,setYourService:l=>{window[e]=l},submit:m,useCallback:(e,r)=>{const{useReactingPower:a}=l();return a().service.Reactionary.useCallback(e,r)},useEffect:(e,r,a)=>{const{useReactingPower:i}=l();return i().service.Reactionary.useEffect(e,r,a)},useFormRefs:e=>{const{useReactingPower:r}=l();return r().service.Reactionary.useFormRefs(e)},useMemo:(e,r)=>{const{useReactingPower:a}=l();return a().service.Reactionary.useMemo(e,r)},useRef:e=>{const{useReactingPower:r}=l();return r().service.Reactionary.useRef(e)},useService:l,useState:e=>{const{useReactingPower:r}=l();return r().service.Reactionary.useState(e)}});const R=!0,_=!1;var Y=Object.freeze({__proto__:null,NoTheDependenciesAreNotTheSame:_,YesTheDependenciesAreTheSame:R,dependenciesVsDependencies:(e,l)=>{if(!e&&!l)return R;if(!e&&l)return _;if(e&&!l)return _;if(e&&l){if(e.length!=l.length)return _;const r=e.some(((e,r)=>!Object.is(e,l[r])));if(r)return _}return R}});export{Y as Always,S as Api};\n//# sourceMappingURL=index.esm.js.map\n","const e=e=>{const r=e.publicFormState(),t=e.refs(r),[l,o]=t,i=e.stateIndexing(),a=e.sourceOfTruth(i),{sourceOfTruth:s,sourceOfTruthEjectButton:n,sourceOfTruthFromEjectedCartridge:c}=a,[u,d,m,y,f]=e.serviceController(r,t),b=e.service(t,a,u),S=e.dom(u,r,b.ViewModel),[R,_]=e.logicalContext();let p={service:b,sourceOfTruth:s,sourceOfTruthEjectButton:n,sourceOfTruthFromEjectedCartridge:c,dom:S.explorer,logicalContext:R};e.reactingPower&&(p=e.reactingPower(p));const[v,g,T]=e.createElement(i,S.virtualDomController,_,p,a,b.ViewModel.iAmReact),[Y,w]=e.events(S,p);let h={createElement:v,runElementEffects:g,destroyElement:T,eventHandler:Y,submitHandler:w,explore:d,exploreFulfillment:m,employee:y,employMeAsAProducer:f,nowish:r.publicFormStateImmediate,formRefs:l,formRefsIsland:o};return e.serviceClient&&(h=e.serviceClient(h)),h},r=(e,r,t)=>e(r),t=Symbol.for(\"react-44ms/service/crush-kill-destroy\"),l=Symbol.for(\"react-44ms/api/UseServiceSymbol\"),o=()=>window[l],i=Symbol.for(\"react-44ms/api/YieldablePortSymbol\"),a=e=>e?._yieldablePort===i,s=Symbol.for(\"react-44ms/api/RefSymbol\"),n=e=>!!e&&e._refSymbol===s,c={element:{name:e=>e},RefPrimitive:{on:e=>({[s]:`${e}`,_refSymbol:s})}},u=Symbol.for(\"react-44ms/api/YieldableHandlerSymbol\"),d=e=>e?._yieldableHandler===u,m=Symbol.for(\"react-44ms/api/YieldedValueSymbol\"),y=Symbol.for(\"react-44ms/api/YieldedValueNotFoundSymbol\"),f=e=>!!e&&e._yieldedValueSymbol===m,b=e=>f(e)?e[m]:y,S=e=>{const{useSubmit:r}=o();return r().submit(e)};S.NO_SUBMIT_FOUND_INVALID_FORM_REASON_KEY=Symbol.for(\"React44ms/FORM_SUBMIT_INVALID_NO_SUBMIT_KEY\");const R=Symbol.for(\"react-44ms/api/TypedRefSymbol\"),_=Symbol.for(\"react-44ms/api/TypedRefValueSymbol\");var p=Object.freeze({__proto__:null,Convenience:c,RefSymbol:s,TypedRefSymbol:R,TypedRefValueSymbol:_,Yield:e=>{const{useReactingPower:r}=o();return r().service.Reactionary.Yield(e)},YieldAValueAtTheEnd:e=>({[m]:e,_yieldedValueSymbol:m}),YieldableHandler:e=>({[u]:e,_yieldableHandler:u}),YieldableHandlerSymbol:u,YieldablePort:e=>({[i]:e,_yieldablePort:i}),YieldablePortSymbol:i,YieldedValueNotFoundSymbol:y,YieldedValueSymbol:m,anyRefishToStringValue:e=>n(e)?e[s]:e||\"\",anyYieldableHandlerToValue:e=>d(e)?e[u]:\"\",extractYieldedValue:b,extractYieldingRef:e=>{let r,t,l=[],o=y;if(Array.isArray(e)){const i=(e=(e=(e=e.filter((e=>!d(e)||(t=e,!1)))).filter((e=>!a(e)||(r=e,!1)))).filter((e=>!f(e)||(o=b(e),!1))))[e.length-1];n(i)||(o=i,e=e.slice(0,e.length-1)),l=e}else e&&(l=[e]);return{yieldingCallstackAdditions:l,yieldablePort:r,yieldableHandler:t,yieldedValue:o}},fulfill:{name:e=>e},isThatARef:n,isThatATypedRef:e=>!!e&&e._typedRefSymbol===R,isThatAYieldableHandler:d,isThatAYieldablePort:a,isThatAYieldedValuePrimitive:f,setYourService:e=>{window[l]=e},submit:S,useCallback:(e,r)=>{const{useReactingPower:t}=o();return t().service.Reactionary.useCallback(e,r)},useEffect:(e,r,t)=>{const{useReactingPower:l}=o();return l().service.Reactionary.useEffect(e,r,t)},useFormRefs:e=>{const{useReactingPower:r}=o();return r().service.Reactionary.useFormRefs(e)},useMemo:(e,r)=>{const{useReactingPower:t}=o();return t().service.Reactionary.useMemo(e,r)},useRef:e=>{const{useReactingPower:r}=o();return r().service.Reactionary.useRef(e)},useService:o,useState:e=>{const{useReactingPower:r}=o();return r().service.Reactionary.useState(e)}});const v=(e,r)=>{const t=r[p.RefSymbol].split(\".\");let l=e;return t.forEach((e=>{e&&e.length>0&&(l=l?.[e])})),l},g=Symbol.for(\"react-44ms/service/reacting-power\"),T=()=>window[g],Y=Symbol.for(\"react-44ms/service/use-submit\"),w=()=>window[Y];let h;!function(e){e.state=\"state\",e.after_rendering=\"after_rendering\"}(h||(h={}));export{t as PublicFormStateStack_CrushKillDestroy,g as React44msReactingPowerSymbol,Y as React44msUseSubmitSymbol,h as WorkDescription,r as createElement,v as publicFormAccess,e as reactionaryTemplateMethod,T as useReactingPower,w as useSubmit};\n//# sourceMappingURL=index.esm.js.map\n","import * as t44ms from \"typescript-44ms\";\nimport * as Service from \"typescript-44ms-reactionary-template-method\";\n\nconst traverseFreshMost_giveMutatable = (\n  virtualStack: t44ms.Api.ref[],\n  virtualDom?: Service.VirtualDomNode\n) => {\n  const literalCallstack = virtualStack\n    .map((ref) => t44ms.Api.anyRefishToStringValue(ref).split(\".\"))\n    .flat();\n\n  let traverse = virtualDom;\n  literalCallstack.forEach((literalRef) => {\n    if (literalRef.length > 0) {\n      const next = traverse?.children[literalRef];\n      traverse = next;\n    }\n  });\n\n  return traverse;\n};\nconst traverseMutatingFreshMost = (\n  virtualStack: t44ms.Api.ref[],\n  virtualDom: Service.VirtualDomNode\n) => {\n  const literalCallstack = virtualStack\n    .map((ref) => t44ms.Api.anyRefishToStringValue(ref).split(\".\"))\n    .flat();\n\n  let virtualDomNode = virtualDom;\n  literalCallstack.forEach((literalRef, index) => {\n    const thisIsland_orParent = virtualDomNode.children[literalRef];\n    if (!thisIsland_orParent) {\n      const ref: t44ms.Api.RefPrimitive = {\n        [t44ms.Api.RefSymbol]: `${literalCallstack\n          .slice(0, index + 1)\n          .join(\".\")}`,\n        _refSymbol: t44ms.Api.RefSymbol,\n      };\n      const virtualDomNode_shouldExist: Service.VirtualDomNode = {\n        children: {},\n        ref,\n        lastExplicitChildren: null,\n        latestExplicitChildren: null,\n      };\n      virtualDomNode.children[literalRef] = virtualDomNode_shouldExist;\n    }\n    virtualDomNode = virtualDomNode.children[literalRef];\n  });\n\n  return virtualDomNode;\n};\nconst deleteNode = (ref: t44ms.Api.ref, virtualDom: Service.VirtualDomNode) => {\n  const literalCallstack = [ref]\n    .map((ref) => t44ms.Api.anyRefishToStringValue(ref).split(\".\"))\n    .flat();\n\n  let virtualDomNode = virtualDom;\n  literalCallstack.forEach((literalRef, index) => {\n    if (index === literalCallstack.length - 1) {\n      delete virtualDomNode.children[literalRef];\n    } else {\n      virtualDomNode = virtualDomNode.children[literalRef];\n    }\n  });\n\n  return virtualDomNode;\n};\nconst extractFulfillment = (\n  rendered?: Service.DomNode\n): Service.VirtualDomNode[\"latestFulfillment\"] => {\n  let fulfillment: Service.VirtualDomNode[\"latestFulfillment\"] = {};\n  const children = !!rendered?.props?.children\n    ? Array.isArray(rendered.props.children)\n      ? rendered.props.children\n      : [rendered.props.children]\n    : [];\n  children.forEach((child: JSX.Element) => {\n    if (!child) {\n      return;\n    }\n\n    if (child.type === \"fulfill\") {\n      const thisFulfillment: Service.VirtualDomNode[\"latestFulfillment\"] = {\n        [child.props.name]: child.props.handler,\n      };\n      fulfillment = {\n        ...fulfillment,\n        ...thisFulfillment,\n      };\n    }\n  });\n  return fulfillment;\n};\n\nconst extractGatewayNode = (\n  expect: t44ms.Api.Expect,\n  rendered?: Service.DomNode\n): Service.GatewayNode => {\n  type AnyEventHandlerKey_literally = `on${string}`;\n  type Input = {\n    name?: string;\n  } & {\n    [key: AnyEventHandlerKey_literally]: () => void;\n  } & { onChange?: (newValue: any) => void };\n  type Submit = { name?: string } & {\n    onSubmit?: t44ms.Api.form[\"onSubmit\"];\n  };\n  let inputs: Input[] = [];\n  let submits: Submit[] = [];\n  const children = !!rendered?.props?.children\n    ? Array.isArray(rendered.props.children)\n      ? rendered.props.children\n      : [rendered.props.children]\n    : [];\n  [...[rendered], ...children].forEach((child: JSX.Element) => {\n    if (!child) {\n      return;\n    }\n    if (child.type === \"form\") {\n      const thisSubmit: Submit = {\n        name: child.props.name,\n        onSubmit: child.props[\"React44ms_onSubmit\"],\n      };\n      submits = [...submits, ...[thisSubmit]];\n    }\n    if (child.type === \"input\" && child.props[\"React44ms_onChange\"]) {\n      const thisInput: Input = {\n        name: child.props.name,\n        onChange: child.props[\"React44ms_onChange\"],\n      };\n      Object.keys(child.props).forEach((key) => {\n        if (\n          key.startsWith(\"on\") &&\n          key.length > \"on\".length &&\n          child.props[key] instanceof Function\n        ) {\n          thisInput[key as `on${string}`] = child.props[key];\n        }\n      });\n      inputs = [...inputs, ...[thisInput]];\n    }\n    if (child.type === \"output\") {\n    }\n  });\n\n  const findInputTargetedByEvent = (\n    yieldablePort?: t44ms.Api.YieldablePortPrimitive | undefined\n  ) => {\n    let inputTarget;\n\n    if (yieldablePort) {\n      const explicitYieldablePortInput = inputs.find(\n        (input) => input.name === yieldablePort[t44ms.Api.YieldablePortSymbol]\n      );\n      if (explicitYieldablePortInput) {\n        inputTarget = explicitYieldablePortInput;\n      }\n    } else {\n      const firstInputWithoutAName = inputs.find((input) => !input.name);\n      if (firstInputWithoutAName) {\n        inputTarget = firstInputWithoutAName;\n      }\n\n      const firstInput = inputs.length > 0 ? inputs[0] : undefined;\n      if (!inputTarget && firstInput) {\n        inputTarget = firstInput;\n      }\n    }\n\n    return inputTarget;\n  };\n  const handleEvent = (yieldingRef: t44ms.Api.YieldingRef) => {\n    const inputTarget = findInputTargetedByEvent(yieldingRef.yieldablePort);\n    const thisHandlerName_explicit = t44ms.Api.anyYieldableHandlerToValue(\n      yieldingRef.yieldableHandler\n    );\n\n    let thisHandlerName = thisHandlerName_explicit;\n    const thisHasNoHandlerNameExplicitly =\n      !thisHandlerName || thisHandlerName.length < 1;\n    const thereIsValueBeingSent =\n      yieldingRef.yieldedValue !== t44ms.Api.YieldedValueNotFoundSymbol;\n    if (thisHasNoHandlerNameExplicitly && thereIsValueBeingSent) {\n      thisHandlerName = \"onChange\";\n    }\n\n    if (thisHandlerName === \"onChange\") {\n      const thisNodeEventHandler = inputTarget?.onChange;\n      const inputOnChangeEventTarget: t44ms.Api.InputOnChangeEventTarget = {\n        value: yieldingRef.yieldedValue,\n      };\n      const inputOnChangeEvent: t44ms.Api.InputOnChangeEvent = {\n        target: inputOnChangeEventTarget,\n      };\n      thisNodeEventHandler?.(inputOnChangeEvent);\n    } else {\n      const thisNodeEventHandler =\n        inputTarget?.[thisHandlerName as `on${string}`];\n      thisNodeEventHandler?.();\n    }\n  };\n\n  const findSubmitTargetedByEvent = (\n    yieldablePort?: t44ms.Api.YieldablePortPrimitive | undefined\n  ) => {\n    let submitTargets: Submit[] = [];\n\n    if (yieldablePort) {\n      const explicitYieldablePortSubmit = submits.find(\n        (input) => input.name === yieldablePort[t44ms.Api.YieldablePortSymbol]\n      );\n      if (explicitYieldablePortSubmit) {\n        submitTargets = [...submitTargets, ...[explicitYieldablePortSubmit]];\n      }\n    } else {\n      submitTargets = [...submits];\n    }\n\n    return submitTargets;\n  };\n\n  const handleSubmit = (\n    yieldingRef: t44ms.Api.YieldingRef,\n    handleException: (any_exception: unknown, submit_name?: string) => void\n  ) => {\n    const submitTargets = findSubmitTargetedByEvent(yieldingRef.yieldablePort);\n    const submitEvent: t44ms.Api.FormOnSubmitEvent = {\n      expect,\n    };\n    submitTargets.forEach((submitTarget) => {\n      try {\n        submitTarget.onSubmit?.(submitEvent);\n      } catch (anyError) {\n        handleException(anyError, submitTarget.name);\n      }\n    });\n  };\n\n  const domNode: Service.GatewayNode = {\n    handleEvent,\n    handleSubmit,\n  };\n\n  return domNode;\n};\n\nconst extractExplicitChildren = (rendered: JSX.Element) => {\n  let explicitChildren: NonNullable<\n    Service.VirtualDomNode[\"latestExplicitChildren\"]\n  > = [];\n  const children: JSX.Element[] = !!rendered?.props?.children\n    ? Array.isArray(rendered.props.children)\n      ? rendered.props.children\n      : [rendered.props.children]\n    : [];\n  children.forEach((child) => {\n    if (!!child && child.type instanceof Function) {\n      const this_ref = (child as unknown as any).ref;\n      explicitChildren = [...explicitChildren, ...[this_ref]];\n    }\n  });\n  return explicitChildren;\n};\n\nconst renderOnVirtualDom = (\n  expect: t44ms.Api.Expect,\n  rendered: JSX.Element,\n  virtualStack: t44ms.Api.ref[],\n  virtualDom: Service.VirtualDomNode\n) => {\n  const thisVirtualDomNode = traverseFreshMost_giveMutatable(\n    virtualStack,\n    virtualDom\n  )!;\n  thisVirtualDomNode.rendered = rendered;\n  thisVirtualDomNode.gateway = extractGatewayNode(expect, rendered);\n\n  if (thisVirtualDomNode.latestOutputs) {\n    thisVirtualDomNode.lastOutputs = thisVirtualDomNode.latestOutputs;\n    thisVirtualDomNode.latestOutputs = undefined;\n  }\n\n  if (thisVirtualDomNode.latestFulfillment) {\n    thisVirtualDomNode.lastFulfillment = thisVirtualDomNode.latestFulfillment;\n    thisVirtualDomNode.latestFulfillment = undefined;\n  }\n\n  if (thisVirtualDomNode.latestExplicitChildren) {\n    thisVirtualDomNode.lastExplicitChildren =\n      thisVirtualDomNode.latestExplicitChildren;\n    thisVirtualDomNode.latestExplicitChildren = null;\n  }\n\n  const outputs: Service.Output[] = parseDomNode_forOutputs(rendered);\n  thisVirtualDomNode.latestOutputs = outputs;\n\n  thisVirtualDomNode.latestFulfillment = extractFulfillment(rendered);\n\n  thisVirtualDomNode.latestExplicitChildren = extractExplicitChildren(rendered);\n\n  return thisVirtualDomNode;\n};\n\nconst parseDomNode_forOutputs = (domNode?: Service.DomNode | undefined) => {\n  let outputs: Service.Output[] = [];\n  const children = !!domNode?.props?.children\n    ? Array.isArray(domNode.props.children)\n      ? domNode.props.children\n      : [domNode.props.children]\n    : [];\n  children.forEach((child: JSX.Element) => {\n    if (!child) {\n      return;\n    }\n\n    if (child.type === \"output\") {\n      const thisOutput: Service.Output = {\n        name: child.props.name,\n        value: child.props[\"React44ms_value\"],\n      };\n      outputs = [...outputs, ...[thisOutput]];\n    }\n  });\n  return outputs;\n};\nconst renderOnPublicDom = (\n  _serviceController: Service.ServiceController,\n  siphonPublicFinal: ReturnType<Service.FactoryPublicFormState>[\"siphonPublicFinal\"],\n  siphonPublicFulfillmentFinal: ReturnType<Service.FactoryPublicFormState>[\"siphonPublicFulfillmentFinal\"],\n  virtualStack: t44ms.Api.ref[],\n  virtualDomNode:\n    | Service.VirtualDomNode\n    | typeof Service.PublicFormStateStack_CrushKillDestroy\n) => {\n  if (virtualDomNode === Service.PublicFormStateStack_CrushKillDestroy) {\n    siphonPublicFinal(\n      virtualStack,\n      undefined,\n      Service.PublicFormStateStack_CrushKillDestroy\n    );\n    siphonPublicFulfillmentFinal(\n      virtualStack,\n      undefined,\n      Service.PublicFormStateStack_CrushKillDestroy\n    );\n    return;\n  }\n\n  (virtualDomNode.lastOutputs || []).forEach((oldOutput) => {\n    const equivalentOutput = (virtualDomNode.latestOutputs || []).find(\n      (output) => output.name === oldOutput.name\n    );\n    if (!equivalentOutput) {\n      siphonPublicFinal(\n        virtualStack,\n        Service.PublicFormStateStack_CrushKillDestroy,\n        oldOutput.name\n      );\n    }\n  });\n  (virtualDomNode.latestOutputs || []).forEach((output) => {\n    const equivalentOutput = (virtualDomNode.lastOutputs || []).find(\n      (lastOutput) => lastOutput.name === output.name\n    );\n    if (!equivalentOutput || equivalentOutput?.value !== output.value) {\n      siphonPublicFinal(virtualStack, output.value, output.name);\n    }\n  });\n\n  Object.entries(virtualDomNode.lastFulfillment || {}).forEach(\n    (oldFulfillment) => {\n      const [oldName] = oldFulfillment;\n      const equivalentOutput = Object.entries(\n        virtualDomNode.latestFulfillment || {}\n      ).find(([newName]) => newName === oldName);\n      if (!equivalentOutput) {\n        siphonPublicFulfillmentFinal(\n          virtualStack,\n          Service.PublicFormStateStack_CrushKillDestroy,\n          oldName\n        );\n      }\n    }\n  );\n  Object.entries(virtualDomNode.latestFulfillment || {}).forEach(\n    (fulfillment) => {\n      const [name, value] = fulfillment;\n      const equivalentFulfillment = (virtualDomNode.lastFulfillment || {})[\n        name\n      ];\n      if (!equivalentFulfillment || equivalentFulfillment !== value) {\n        siphonPublicFulfillmentFinal(virtualStack, value, name);\n      }\n    }\n  );\n};\n\nexport const ootbDom: Service.FactoryDom = (\n  serviceController,\n  publicFormStateStack,\n  serviceViewModel\n) => {\n  const {\n    publicFormStateImmediate,\n    siphonPublicFinal,\n    siphonPublicFulfillmentFinal,\n  } = publicFormStateStack;\n\n  const expect: t44ms.Api.Expect = <\n    YourExpectedFormDataFromThatLocationRef extends any\n  >(\n    ref: t44ms.Api.ref,\n    defaultValue: YourExpectedFormDataFromThatLocationRef\n  ): YourExpectedFormDataFromThatLocationRef => {\n    const current_literal_value =\n      Service.publicFormAccess<YourExpectedFormDataFromThatLocationRef>(\n        publicFormStateImmediate(),\n        ref\n      );\n\n    const guaranteedValue = current_literal_value || defaultValue;\n\n    return guaranteedValue;\n  };\n\n  let virtualDom: Service.VirtualDomNode | null = null;\n  let living_effects: Service.Work[] = [];\n\n  let virtualStack: t44ms.Api.ref[] = [];\n  const begin_context = (ref?: t44ms.Api.ref) => {\n    virtualStack = [...(ref ? [ref] : []), ...virtualStack];\n    serviceViewModel.work_reconcile_state();\n  };\n  const createElement: Service.VirtualDomController[\"createElement\"] = <\n    YourPropsType extends any\n  >(\n    element_type: t44ms.Api.FunctionComponent<YourPropsType>,\n    props: YourPropsType\n  ) => {\n    if (!virtualDom) {\n      const ref: t44ms.Api.RefPrimitive = {\n        [t44ms.Api.RefSymbol]: `${[].join(\".\")}`,\n        _refSymbol: t44ms.Api.RefSymbol,\n      };\n      virtualDom = {\n        children: {},\n        ref,\n        latestExplicitChildren: null,\n        lastExplicitChildren: null,\n      };\n    }\n\n    const thisVirtualDomNode: Service.VirtualDomNode =\n      traverseMutatingFreshMost(virtualStack, virtualDom);\n    thisVirtualDomNode.type =\n      element_type as unknown as t44ms.Api.FunctionComponent;\n    thisVirtualDomNode.props = props;\n  };\n  const end_context = (rendered: JSX.Element) => {\n    const thisVirtualDomNode_fullyFormed: Service.VirtualDomNode =\n      renderOnVirtualDom(expect, rendered, virtualStack, virtualDom!)!;\n\n    let public_form_state_transitions: Service.Work[] = [];\n    const proxy_siphonPublicFinal: Service.PublicFormStateStack[\"siphonPublicFinal\"] =\n      (virtualStack, value, name) => {\n        const virtualStackCopy = [...virtualStack];\n        const this_state_transition = () => {\n          siphonPublicFinal(virtualStackCopy, value, name);\n        };\n        public_form_state_transitions = [\n          ...public_form_state_transitions,\n          ...[this_state_transition],\n        ];\n      };\n\n    let public_form_fulfillment_transitions: Service.Work[] = [];\n    const proxy_siphonPublicFulfillmentFinal: Service.PublicFormStateStack[\"siphonPublicFulfillmentFinal\"] =\n      (virtualStack, value, name) => {\n        const virtualStackCopy = [...virtualStack];\n        const this_fulfillment_transition = () => {\n          siphonPublicFulfillmentFinal(virtualStackCopy, value, name);\n        };\n        public_form_fulfillment_transitions = [\n          ...public_form_fulfillment_transitions,\n          ...[this_fulfillment_transition],\n        ];\n      };\n\n    renderOnPublicDom(\n      serviceController,\n      proxy_siphonPublicFinal,\n      proxy_siphonPublicFulfillmentFinal,\n      virtualStack,\n      thisVirtualDomNode_fullyFormed\n    );\n\n    const virtualStackCopy = [...virtualStack];\n    const effect_state_transitions__includes_yields: Service.Work = () => {\n      serviceViewModel.work_reconcile_state();\n    };\n    const effect_component_effects: Service.Work = () => {\n      serviceViewModel.work_after_rendering();\n    };\n    const effect_renders_on_the_public_dom: Service.Work = () => {\n      public_form_state_transitions.forEach(\n        (this_public_form_state_transition) => {\n          this_public_form_state_transition();\n        }\n      );\n      if (public_form_state_transitions.length > 0) {\n        const literalCallstack = virtualStackCopy\n          .map((ref) => t44ms.Api.anyRefishToStringValue(ref).split(\".\"))\n          .flat();\n        const whereAmI: t44ms.Api.RefPrimitive = {\n          [t44ms.Api.RefSymbol]: `${literalCallstack.join(\".\")}`,\n          _refSymbol: t44ms.Api.RefSymbol,\n        };\n        serviceController.public_form_state_ready(whereAmI);\n      }\n\n      public_form_fulfillment_transitions.forEach(\n        (this_public_form_fulfillment_transition) => {\n          this_public_form_fulfillment_transition();\n        }\n      );\n      if (public_form_fulfillment_transitions.length > 0) {\n        const literalCallstack = virtualStackCopy\n          .map((ref) => t44ms.Api.anyRefishToStringValue(ref).split(\".\"))\n          .flat();\n        const whereAmI: t44ms.Api.RefPrimitive = {\n          [t44ms.Api.RefSymbol]: `${literalCallstack.join(\".\")}`,\n          _refSymbol: t44ms.Api.RefSymbol,\n        };\n        serviceController.public_form_fulfillment_ready(whereAmI);\n      }\n    };\n    living_effects = [\n      ...living_effects,\n      ...[\n        effect_component_effects,\n        effect_state_transitions__includes_yields,\n        effect_renders_on_the_public_dom,\n      ],\n    ];\n\n    virtualStack = virtualStack.slice(1);\n\n    return thisVirtualDomNode_fullyFormed;\n  };\n  const effects = () => {\n    const effects = living_effects;\n    living_effects = [];\n    effects.forEach((this_effect) => {\n      this_effect();\n    });\n  };\n\n  const crush_kill_destroy: Service.VirtualDomController[\"crush_kill_destroy\"] =\n    (ref) => {\n      if (!virtualDom) {\n        return;\n      }\n\n      deleteNode(ref, virtualDom);\n\n      let public_form_state_transitions: Service.Work[] = [];\n      const proxy_siphonPublicFinal: Service.PublicFormStateStack[\"siphonPublicFinal\"] =\n        (virtualStack, value, name) => {\n          const virtualStackCopy = [...virtualStack];\n          const this_state_transition = () => {\n            siphonPublicFinal(virtualStackCopy, value, name);\n          };\n          public_form_state_transitions = [\n            ...public_form_state_transitions,\n            ...[this_state_transition],\n          ];\n        };\n\n      let public_form_fulfillment_transitions: Service.Work[] = [];\n      const proxy_siphonPublicFulfillmentFinal: Service.PublicFormStateStack[\"siphonPublicFulfillmentFinal\"] =\n        (virtualStack, value, name) => {\n          const virtualStackCopy = [...virtualStack];\n          const this_fulfillment_transition = () => {\n            siphonPublicFulfillmentFinal(virtualStackCopy, value, name);\n          };\n          public_form_fulfillment_transitions = [\n            ...public_form_fulfillment_transitions,\n            ...[this_fulfillment_transition],\n          ];\n        };\n\n      renderOnPublicDom(\n        serviceController,\n        proxy_siphonPublicFinal,\n        proxy_siphonPublicFulfillmentFinal,\n        [ref],\n        Service.PublicFormStateStack_CrushKillDestroy\n      );\n      const effect_renders_on_the_public_dom: Service.Work = () => {\n        public_form_state_transitions.forEach(\n          (this_public_form_state_transition) => {\n            this_public_form_state_transition();\n          }\n        );\n        if (public_form_state_transitions.length > 0) {\n          serviceController.public_form_state_ready(ref);\n        }\n\n        public_form_fulfillment_transitions.forEach(\n          (this_public_form_fulfillment_transition) => {\n            this_public_form_fulfillment_transition();\n          }\n        );\n        if (public_form_fulfillment_transitions.length > 0) {\n          serviceController.public_form_fulfillment_ready(ref);\n        }\n      };\n      living_effects = [\n        ...living_effects,\n        ...[effect_renders_on_the_public_dom],\n      ];\n    };\n\n  const explorer: Service.DOMExplorer = (\n    _iAmReact: Service.IAmReact,\n    callstackAdditions?: any[]\n  ): Service.GatewayNode | null => {\n    if (!virtualDom) {\n      return null;\n    }\n\n    const callstack = [...(callstackAdditions ? callstackAdditions : [])];\n\n    const thisVirtualDomNode = traverseFreshMost_giveMutatable(\n      callstack,\n      virtualDom\n    );\n\n    const thisGatewayNode: Service.GatewayNode | undefined =\n      thisVirtualDomNode?.gateway;\n\n    return thisGatewayNode || null;\n  };\n  const exploreRefs = (whereAmILiterally: t44ms.Api.ref) => {\n    if (!virtualDom) {\n      return null;\n    }\n\n    const thisVirtualDomNode: Service.VirtualDomNode | undefined =\n      traverseFreshMost_giveMutatable([whereAmILiterally], virtualDom);\n\n    return thisVirtualDomNode ? thisVirtualDomNode : null;\n  };\n  const giveCurrentRefStack = () => {\n    return virtualStack;\n  };\n\n  const virtualDomController: Service.VirtualDomController = {\n    begin_context,\n    createElement,\n    end_context,\n    effects,\n    crush_kill_destroy,\n  };\n  return { explorer, exploreRefs, virtualDomController, giveCurrentRefStack };\n};\n"],"names":["e","Symbol","for","l","window","r","a","_yieldablePort","i","t","_refSymbol","o","element","name","RefPrimitive","on","i$1","n","s","_yieldableHandler","d","c","u","_yieldedValueSymbol","y","m","useSubmit","submit","NO_SUBMIT_FOUND_INVALID_FORM_REASON_KEY","b","f","S","Object","freeze","__proto__","Convenience","RefSymbol","TypedRefSymbol","TypedRefValueSymbol","Yield","useReactingPower","service","Reactionary","YieldAValueAtTheEnd","d$1","YieldableHandler","n$1","YieldableHandlerSymbol","YieldablePort","YieldablePortSymbol","YieldedValueNotFoundSymbol","YieldedValueSymbol","anyRefishToStringValue","anyYieldableHandlerToValue","extractYieldedValue","extractYieldingRef","Array","isArray","filter","length","slice","yieldingCallstackAdditions","yieldablePort","yieldableHandler","yieldedValue","fulfill","isThatARef","isThatATypedRef","_typedRefSymbol","isThatAYieldableHandler","isThatAYieldablePort","isThatAYieldedValuePrimitive","setYourService","useCallback","useEffect","useFormRefs","useMemo","useRef","useService","useState","R","_","p","h","state","after_rendering","traverseFreshMost_giveMutatable","virtualStack","virtualDom","literalCallstack","map","ref","t44ms","split","flat","traverse","forEach","literalRef","next","children","extractGatewayNode","expect","rendered","inputs","submits","props","child","type","thisSubmit","onSubmit","thisInput","onChange","keys","key","startsWith","Function","handleEvent","yieldingRef","inputTarget","explicitYieldablePortInput","find","input","firstInputWithoutAName","firstInput","undefined","findInputTargetedByEvent","thisHandlerName","thisHasNoHandlerNameExplicitly","thereIsValueBeingSent","thisNodeEventHandler","target","value","handleSubmit","handleException","submitTargets","explicitYieldablePortSubmit","findSubmitTargetedByEvent","submitEvent","submitTarget","anyError","renderOnVirtualDom","thisVirtualDomNode","gateway","latestOutputs","lastOutputs","latestFulfillment","lastFulfillment","latestExplicitChildren","lastExplicitChildren","outputs","parseDomNode_forOutputs","fulfillment","thisFulfillment","handler","extractFulfillment","explicitChildren","this_ref","extractExplicitChildren","domNode","thisOutput","renderOnPublicDom","_serviceController","siphonPublicFinal","siphonPublicFulfillmentFinal","virtualDomNode","Service","oldOutput","output","equivalentOutput","lastOutput","entries","oldFulfillment","oldName","newName","equivalentFulfillment","ootbDom","serviceController","publicFormStateStack","serviceViewModel","publicFormStateImmediate","defaultValue","current_literal_value","living_effects","virtualDomController","begin_context","work_reconcile_state","createElement","element_type","join","index","virtualDomNode_shouldExist","traverseMutatingFreshMost","end_context","thisVirtualDomNode_fullyFormed","public_form_state_transitions","public_form_fulfillment_transitions","virtualStackCopy","work_after_rendering","this_public_form_state_transition","whereAmI","public_form_state_ready","this_public_form_fulfillment_transition","public_form_fulfillment_ready","effects","this_effect","crush_kill_destroy","deleteNode","explorer","_iAmReact","callstackAdditions","callstack","thisGatewayNode","exploreRefs","whereAmILiterally","giveCurrentRefStack"],"mappings":"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"}