"use strict";const e=Symbol.for("react-44ms/api/UseServiceSymbol"),i=()=>window[e],t=Symbol.for("react-44ms/api/YieldablePortSymbol"),l=e=>e?._yieldablePort===t,o=Symbol.for("react-44ms/api/RefSymbol"),r=e=>!!e&&e._refSymbol===o,s={element:{name:e=>e},RefPrimitive:{on:e=>({[o]:`${e}`,_refSymbol:o})}},a=Symbol.for("react-44ms/api/YieldableHandlerSymbol"),n=e=>e?._yieldableHandler===a,m=Symbol.for("react-44ms/api/YieldedValueSymbol"),d=Symbol.for("react-44ms/api/YieldedValueNotFoundSymbol"),_=e=>!!e&&e._yieldedValueSymbol===m,u=e=>_(e)?e[m]:d,b=e=>{const{useSubmit:t}=i();return t().submit(e)};b.NO_SUBMIT_FOUND_INVALID_FORM_REASON_KEY=Symbol.for("React44ms/FORM_SUBMIT_INVALID_NO_SUBMIT_KEY");const c=Symbol.for("react-44ms/api/TypedRefSymbol"),y=Symbol.for("react-44ms/api/TypedRefValueSymbol");var f=Object.freeze({__proto__:null,Convenience:s,RefSymbol:o,TypedRefSymbol:c,TypedRefValueSymbol:y,Yield:e=>{const{useReactingPower:t}=i();return t().service.Reactionary.Yield(e)},YieldAValueAtTheEnd:e=>({[m]:e,_yieldedValueSymbol:m}),YieldableHandler:e=>({[a]:e,_yieldableHandler:a}),YieldableHandlerSymbol:a,YieldablePort:e=>({[t]:e,_yieldablePort:t}),YieldablePortSymbol:t,YieldedValueNotFoundSymbol:d,YieldedValueSymbol:m,anyRefishToStringValue:e=>r(e)?e[o]:e||"",anyYieldableHandlerToValue:e=>n(e)?e[a]:"",extractYieldedValue:u,extractYieldingRef:e=>{let i,t,o=[],s=d;if(Array.isArray(e)){const a=(e=(e=(e=e.filter((e=>!n(e)||(t=e,!1)))).filter((e=>!l(e)||(i=e,!1)))).filter((e=>!_(e)||(s=u(e),!1))))[e.length-1];r(a)||(s=a,e=e.slice(0,e.length-1)),o=e}else e&&(o=[e]);return{yieldingCallstackAdditions:o,yieldablePort:i,yieldableHandler:t,yieldedValue:s}},fulfill:{name:e=>e},isThatARef:r,isThatATypedRef:e=>!!e&&e._typedRefSymbol===c,isThatAYieldableHandler:n,isThatAYieldablePort:l,isThatAYieldedValuePrimitive:_,setYourService:i=>{window[e]=i},submit:b,useCallback:(e,t)=>{const{useReactingPower:l}=i();return l().service.Reactionary.useCallback(e,t)},useEffect:(e,t,l)=>{const{useReactingPower:o}=i();return o().service.Reactionary.useEffect(e,t,l)},useFormRefs:e=>{const{useReactingPower:t}=i();return t().service.Reactionary.useFormRefs(e)},useMemo:(e,t)=>{const{useReactingPower:l}=i();return l().service.Reactionary.useMemo(e,t)},useRef:e=>{const{useReactingPower:t}=i();return t().service.Reactionary.useRef(e)},useService:i,useState:e=>{const{useReactingPower:t}=i();return t().service.Reactionary.useState(e)}});const S=Symbol.for("react-44ms/api/UseServiceSymbol");(e=>{const{useSubmit:i}=window[S];return i().submit(e)}).NO_SUBMIT_FOUND_INVALID_FORM_REASON_KEY=Symbol.for("React44ms/FORM_SUBMIT_INVALID_NO_SUBMIT_KEY");const R=Symbol.for("react-44ms/service/use-submit");let O;!function(e){e.state="state",e.after_rendering="after_rendering"}(O||(O={}));const N=(e,i,t=0)=>{if(!i){return{reasons_this_form_is_invalid:{[f.submit.NO_SUBMIT_FOUND_INVALID_FORM_REASON_KEY]:"Cannot handle submit without a starting point. Please provide a ref."},submissions:{}}}const l={[f.RefSymbol]:i.yieldingCallstackAdditions.map((e=>f.anyRefishToStringValue(e).split("."))).flat().join("."),_refSymbol:f.RefSymbol},o=e.exploreRefs(l);if(!o){return{reasons_this_form_is_invalid:{[f.submit.NO_SUBMIT_FOUND_INVALID_FORM_REASON_KEY]:"Cannot handle submit without a starting point. Please provide a ref to something valid."},submissions:{}}}let r={};const s={submit:e=>{if(!e)throw new Error("Cannot submit an invalid submission!");r={...r,[`${l[f.RefSymbol]}`]:!!e}}};window[R]=s;let a={};o.gateway?.handleSubmit(i,((e,i)=>{const t=`${l[f.RefSymbol]}${i?`.${i}`:""}`;a[t]=e?`${e}`:`${new Error("Unknown error.")}`})),window[R]=null,Object.entries(o.children).forEach((([o])=>{if(!o||o.trim().length<1)return;const s={[f.RefSymbol]:`${l[f.RefSymbol]}.${o}`,_refSymbol:f.RefSymbol},n={...i,yieldingCallstackAdditions:[s]},{reasons_this_form_is_invalid:m,submissions:d}=N(e,n,t+1);a={...a,...m},r={...r,...d}})),0===t&&Object.keys(r).length<1&&(a={...a,[f.submit.NO_SUBMIT_FOUND_INVALID_FORM_REASON_KEY]:"Nothing submitted yet."});let n=null;return(Object.keys(a).length>0||a[f.submit.NO_SUBMIT_FOUND_INVALID_FORM_REASON_KEY])&&(n=a),{reasons_this_form_is_invalid:n,submissions:r}};exports.ootbEvents=(e,i)=>[e=>{const t=f.extractYieldingRef(e);i.dom(null,t.yieldingCallstackAdditions)?.handleEvent(t)},i=>{const t=f.extractYieldingRef(i),{reasons_this_form_is_invalid:l}=N(e,t);return{reasons_this_form_is_invalid:l}}];
//# sourceMappingURL=index.cjs.js.map
