{"version":3,"file":"index.cjs.js","sources":["../node_modules/typescript-44ms/build/index.esm.js","../src/ootb-form-refs.ts"],"sourcesContent":["const e=Symbol.for(\"react-44ms/api/UseServiceSymbol\"),l=()=>window[e],r=Symbol.for(\"react-44ms/api/YieldablePortSymbol\"),a=e=>e?._yieldablePort===r,i=Symbol.for(\"react-44ms/api/RefSymbol\"),t=e=>!!e&&e._refSymbol===i,o={element:{name:e=>e},RefPrimitive:{on:e=>({[i]:`${e}`,_refSymbol:i})}},n=Symbol.for(\"react-44ms/api/YieldableHandlerSymbol\"),s=e=>e?._yieldableHandler===n,d=Symbol.for(\"react-44ms/api/YieldedValueSymbol\"),c=Symbol.for(\"react-44ms/api/YieldedValueNotFoundSymbol\"),u=e=>!!e&&e._yieldedValueSymbol===d,y=e=>u(e)?e[d]:c,m=e=>{const{useSubmit:r}=l();return r().submit(e)};m.NO_SUBMIT_FOUND_INVALID_FORM_REASON_KEY=Symbol.for(\"React44ms/FORM_SUBMIT_INVALID_NO_SUBMIT_KEY\");const b=Symbol.for(\"react-44ms/api/TypedRefSymbol\"),f=Symbol.for(\"react-44ms/api/TypedRefValueSymbol\");var S=Object.freeze({__proto__:null,Convenience:o,RefSymbol:i,TypedRefSymbol:b,TypedRefValueSymbol:f,Yield:e=>{const{useReactingPower:r}=l();return r().service.Reactionary.Yield(e)},YieldAValueAtTheEnd:e=>({[d]:e,_yieldedValueSymbol:d}),YieldableHandler:e=>({[n]:e,_yieldableHandler:n}),YieldableHandlerSymbol:n,YieldablePort:e=>({[r]:e,_yieldablePort:r}),YieldablePortSymbol:r,YieldedValueNotFoundSymbol:c,YieldedValueSymbol:d,anyRefishToStringValue:e=>t(e)?e[i]:e||\"\",anyYieldableHandlerToValue:e=>s(e)?e[n]:\"\",extractYieldedValue:y,extractYieldingRef:e=>{let l,r,i=[],o=c;if(Array.isArray(e)){const n=(e=(e=(e=e.filter((e=>!s(e)||(r=e,!1)))).filter((e=>!a(e)||(l=e,!1)))).filter((e=>!u(e)||(o=y(e),!1))))[e.length-1];t(n)||(o=n,e=e.slice(0,e.length-1)),i=e}else e&&(i=[e]);return{yieldingCallstackAdditions:i,yieldablePort:l,yieldableHandler:r,yieldedValue:o}},fulfill:{name:e=>e},isThatARef:t,isThatATypedRef:e=>!!e&&e._typedRefSymbol===b,isThatAYieldableHandler:s,isThatAYieldablePort:a,isThatAYieldedValuePrimitive:u,setYourService:l=>{window[e]=l},submit:m,useCallback:(e,r)=>{const{useReactingPower:a}=l();return a().service.Reactionary.useCallback(e,r)},useEffect:(e,r,a)=>{const{useReactingPower:i}=l();return i().service.Reactionary.useEffect(e,r,a)},useFormRefs:e=>{const{useReactingPower:r}=l();return r().service.Reactionary.useFormRefs(e)},useMemo:(e,r)=>{const{useReactingPower:a}=l();return a().service.Reactionary.useMemo(e,r)},useRef:e=>{const{useReactingPower:r}=l();return r().service.Reactionary.useRef(e)},useService:l,useState:e=>{const{useReactingPower:r}=l();return r().service.Reactionary.useState(e)}});const R=!0,_=!1;var Y=Object.freeze({__proto__:null,NoTheDependenciesAreNotTheSame:_,YesTheDependenciesAreTheSame:R,dependenciesVsDependencies:(e,l)=>{if(!e&&!l)return R;if(!e&&l)return _;if(e&&!l)return _;if(e&&l){if(e.length!=l.length)return _;const r=e.some(((e,r)=>!Object.is(e,l[r])));if(r)return _}return R}});export{Y as Always,S as Api};\n//# sourceMappingURL=index.esm.js.map\n","import * as t44ms from \"typescript-44ms\";\nimport * as Service from \"typescript-44ms-reactionary-template-method\";\n\nexport const ootbFormRefs: Service.FactoryFormRefs = (publicFormStateStack) => {\n  const { publicFormStateImmediate } = publicFormStateStack;\n\n  const somethingYetToExist = Symbol.for(\"somethingYetToExist\");\n  const form_refs_pretend_object = {};\n  const createProxy = <ProxyingType extends {}>(previousNameStack?: any) => {\n    const nameStack = Array.isArray(previousNameStack)\n      ? previousNameStack\n      : previousNameStack\n      ? [previousNameStack]\n      : [];\n    const form_refs_proxy = new Proxy<ProxyingType>(\n      form_refs_pretend_object as unknown as ProxyingType,\n      {\n        get: (_target: any, name: any) => {\n          if (name === t44ms.Api.RefSymbol) {\n            return `${nameStack.join(\".\")}`;\n          }\n          if (name === \"_refSymbol\") {\n            return t44ms.Api.RefSymbol;\n          }\n          if (name === somethingYetToExist) {\n            return nameStack;\n          }\n          if (name === t44ms.Api.TypedRefSymbol) {\n            const value: t44ms.Api.RefPrimitive = {\n              [t44ms.Api.RefSymbol]: `${nameStack.join(\".\")}`,\n              _refSymbol: t44ms.Api.RefSymbol,\n            };\n            return value;\n          }\n          if (name === t44ms.Api.TypedRefValueSymbol) {\n            return somethingYetToExist;\n          }\n          if (name === \"typedRef\") {\n            const refPrimitive: t44ms.Api.RefPrimitive = {\n              [t44ms.Api.RefSymbol]: `${nameStack.join(\".\")}`,\n              _refSymbol: t44ms.Api.RefSymbol,\n            };\n            const value: t44ms.Api.TypedRef<unknown> = {\n              ...refPrimitive,\n              [t44ms.Api.TypedRefSymbol]: refPrimitive,\n              [t44ms.Api.TypedRefValueSymbol]: somethingYetToExist,\n              _typedRefSymbol: t44ms.Api.TypedRefSymbol,\n            };\n            return value;\n          }\n\n          const myForm =\n            publicFormStateImmediate() || ({} as Service.PublicForm);\n\n          const thisFullName = [...nameStack, ...[name]];\n\n          let value: any;\n          thisFullName.forEach((name, index) => {\n            value =\n              value && value !== somethingYetToExist && name in value\n                ? (value as any)[name]\n                : index === 0\n                ? name in myForm\n                  ? (myForm as any)[name]\n                  : somethingYetToExist\n                : somethingYetToExist;\n          });\n\n          if (typeof value === \"object\" || value === somethingYetToExist) {\n            return createProxy<ProxyingType>(thisFullName);\n          } else {\n            const value: t44ms.Api.RefPrimitive = {\n              [t44ms.Api.RefSymbol]: `${thisFullName.join(\".\")}`,\n              _refSymbol: t44ms.Api.RefSymbol,\n            };\n            return value;\n          }\n        },\n      }\n    ) as any;\n    return form_refs_proxy as ProxyingType;\n  };\n  const formRefs = createProxy();\n\n  const formRefsIsland = (ref: t44ms.Api.ref | undefined) => {\n    const literalCallstack = [ref || formRefs]\n      .map((ref) => t44ms.Api.anyRefishToStringValue(ref).split(\".\"))\n      .flat();\n\n    let island = formRefs;\n    literalCallstack.forEach((name) => {\n      if (name && name.length > 0) {\n        island = (island as any | undefined)?.[name];\n      }\n    });\n\n    return island;\n  };\n\n  return [formRefs, formRefsIsland];\n};\n"],"names":["e","Symbol","for","l","window","r","a","_yieldablePort","i","t","_refSymbol","o","element","name","RefPrimitive","on","n","s","_yieldableHandler","d","c","u","_yieldedValueSymbol","y","m","useSubmit","submit","NO_SUBMIT_FOUND_INVALID_FORM_REASON_KEY","b","f","S","Object","freeze","__proto__","Convenience","RefSymbol","TypedRefSymbol","TypedRefValueSymbol","Yield","useReactingPower","service","Reactionary","YieldAValueAtTheEnd","YieldableHandler","YieldableHandlerSymbol","YieldablePort","YieldablePortSymbol","YieldedValueNotFoundSymbol","YieldedValueSymbol","anyRefishToStringValue","anyYieldableHandlerToValue","extractYieldedValue","extractYieldingRef","Array","isArray","filter","length","slice","yieldingCallstackAdditions","yieldablePort","yieldableHandler","yieldedValue","fulfill","isThatARef","isThatATypedRef","_typedRefSymbol","isThatAYieldableHandler","isThatAYieldablePort","isThatAYieldedValuePrimitive","setYourService","useCallback","useEffect","useFormRefs","useMemo","useRef","useService","useState","publicFormStateStack","publicFormStateImmediate","somethingYetToExist","form_refs_pretend_object","createProxy","previousNameStack","nameStack","Proxy","get","_target","t44ms","join","refPrimitive","myForm","thisFullName","value","forEach","index","formRefs","ref","literalCallstack","map","split","flat","island"],"mappings":"aAAA,MAAMA,EAAEC,OAAOC,IAAI,mCAAmCC,EAAE,IAAIC,OAAOJ,GAAGK,EAAEJ,OAAOC,IAAI,sCAAsCI,EAAEN,GAAGA,GAAGO,iBAAiBF,EAAEG,EAAEP,OAAOC,IAAI,4BAA4BO,EAAET,KAAKA,GAAGA,EAAEU,aAAaF,EAAEG,EAAE,CAACC,QAAQ,CAACC,KAAKb,GAAGA,GAAGc,aAAa,CAACC,GAAGf,IAAC,CAAIQ,CAACA,GAAG,GAAGR,IAAIU,WAAWF,MAAMQ,EAAEf,OAAOC,IAAI,yCAAyCe,EAAEjB,GAAGA,GAAGkB,oBAAoBF,EAAEG,EAAElB,OAAOC,IAAI,qCAAqCkB,EAAEnB,OAAOC,IAAI,6CAA6CmB,EAAErB,KAAKA,GAAGA,EAAEsB,sBAAsBH,EAAEI,EAAEvB,GAAGqB,EAAErB,GAAGA,EAAEmB,GAAGC,EAAEI,EAAExB,IAAI,MAAMyB,UAAUpB,GAAGF,IAAI,OAAOE,IAAIqB,OAAO1B,EAAC,EAAGwB,EAAEG,wCAAwC1B,OAAOC,IAAI,+CAA+C,MAAM0B,EAAE3B,OAAOC,IAAI,iCAAiC2B,EAAE5B,OAAOC,IAAI,sCAAsC,IAAI4B,EAAEC,OAAOC,OAAO,CAACC,UAAU,KAAKC,YAAYvB,EAAEwB,UAAU3B,EAAE4B,eAAeR,EAAES,oBAAoBR,EAAES,MAAMtC,IAAI,MAAMuC,iBAAiBlC,GAAGF,IAAI,OAAOE,IAAImC,QAAQC,YAAYH,MAAMtC,EAAC,EAAG0C,oBAAoB1C,KAAKmB,CAACA,GAAGnB,EAAEsB,oBAAoBH,IAAIwB,iBAAiB3C,IAAC,CAAIgB,CAACA,GAAGhB,EAAEkB,kBAAkBF,IAAI4B,uBAAuB5B,EAAE6B,cAAc7C,IAAC,CAAIK,CAACA,GAAGL,EAAEO,eAAeF,IAAIyC,oBAAoBzC,EAAE0C,2BAA2B3B,EAAE4B,mBAAmB7B,EAAE8B,uBAAuBjD,GAAGS,EAAET,GAAGA,EAAEQ,GAAGR,GAAG,GAAGkD,2BAA2BlD,GAAGiB,EAAEjB,GAAGA,EAAEgB,GAAG,GAAGmC,oBAAoB5B,EAAE6B,mBAAmBpD,IAAI,IAAIG,EAAEE,EAAEG,EAAE,GAAGG,EAAES,EAAE,GAAGiC,MAAMC,QAAQtD,GAAG,CAAC,MAAMgB,GAAGhB,GAAGA,GAAGA,EAAEA,EAAEuD,QAAQvD,IAAIiB,EAAEjB,KAAKK,EAAEL,GAAE,MAAOuD,QAAQvD,IAAIM,EAAEN,KAAKG,EAAEH,GAAE,MAAOuD,QAAQvD,IAAIqB,EAAErB,KAAKW,EAAEY,EAAEvB,IAAG,MAAOA,EAAEwD,OAAO,GAAG/C,EAAEO,KAAKL,EAAEK,EAAEhB,EAAEA,EAAEyD,MAAM,EAAEzD,EAAEwD,OAAO,IAAIhD,EAAER,CAAC,MAAMA,IAAIQ,EAAE,CAACR,IAAI,MAAM,CAAC0D,2BAA2BlD,EAAEmD,cAAcxD,EAAEyD,iBAAiBvD,EAAEwD,aAAalD,EAAC,EAAGmD,QAAQ,CAACjD,KAAKb,GAAGA,GAAG+D,WAAWtD,EAAEuD,gBAAgBhE,KAAKA,GAAGA,EAAEiE,kBAAkBrC,EAAEsC,wBAAwBjD,EAAEkD,qBAAqB7D,EAAE8D,6BAA6B/C,EAAEgD,eAAelE,IAAIC,OAAOJ,GAAGG,CAAA,EAAGuB,OAAOF,EAAE8C,YAAY,CAACtE,EAAEK,KAAK,MAAMkC,iBAAiBjC,GAAGH,IAAI,OAAOG,IAAIkC,QAAQC,YAAY6B,YAAYtE,EAAEK,EAAC,EAAGkE,UAAU,CAACvE,EAAEK,EAAEC,KAAK,MAAMiC,iBAAiB/B,GAAGL,IAAI,OAAOK,IAAIgC,QAAQC,YAAY8B,UAAUvE,EAAEK,EAAEC,EAAC,EAAGkE,YAAYxE,IAAI,MAAMuC,iBAAiBlC,GAAGF,IAAI,OAAOE,IAAImC,QAAQC,YAAY+B,YAAYxE,EAAC,EAAGyE,QAAQ,CAACzE,EAAEK,KAAK,MAAMkC,iBAAiBjC,GAAGH,IAAI,OAAOG,IAAIkC,QAAQC,YAAYgC,QAAQzE,EAAEK,EAAC,EAAGqE,OAAO1E,IAAI,MAAMuC,iBAAiBlC,GAAGF,IAAI,OAAOE,IAAImC,QAAQC,YAAYiC,OAAO1E,EAAC,EAAG2E,WAAWxE,EAAEyE,SAAS5E,IAAI,MAAMuC,iBAAiBlC,GAAGF,IAAI,OAAOE,IAAImC,QAAQC,YAAYmC,SAAS5E,EAAC,yBCGxzE6E,IACpD,MAAMC,yBAAEA,GAA6BD,EAE/BE,EAAsB9E,OAAOC,IAAI,uBACjC8E,EAA2B,CAAA,EAC3BC,EAAwCC,IAC5C,MAAMC,EAAY9B,MAAMC,QAAQ4B,GAC5BA,EACAA,EACA,CAACA,GACD,GAmEJ,OAlEwB,IAAIE,MAC1BJ,EACA,CACEK,IAAK,CAACC,EAAczE,KAClB,GAAIA,IAAS0E,EAAUpD,UACrB,MAAQ,GAAEgD,EAAUK,KAAK,OAE3B,GAAa,eAAT3E,EACF,OAAO0E,EAAUpD,UAEnB,GAAItB,IAASkE,EACX,OAAOI,EAET,GAAItE,IAAS0E,EAAUnD,eAAgB,CAKrC,MAJsC,CACpC,CAACmD,EAAUpD,WAAa,GAAEgD,EAAUK,KAAK,OACzC9E,WAAY6E,EAAUpD,UAG1B,CACA,GAAItB,IAAS0E,EAAUlD,oBACrB,OAAO0C,EAET,GAAa,aAATlE,EAAqB,CACvB,MAAM4E,EAAuC,CAC3C,CAACF,EAAUpD,WAAa,GAAEgD,EAAUK,KAAK,OACzC9E,WAAY6E,EAAUpD,WAQxB,MAN2C,IACtCsD,EACH,CAACF,EAAUnD,gBAAiBqD,EAC5B,CAACF,EAAUlD,qBAAsB0C,EACjCd,gBAAiBsB,EAAUnD,eAG/B,CAEA,MAAMsD,EACJZ,KAA+B,GAE3Ba,EAAe,IAAIR,EAAetE,GAExC,IAAI+E,EAYJ,GAXAD,EAAaE,SAAQ,CAAChF,EAAMiF,KAC1BF,EACEA,GAASA,IAAUb,GAAuBlE,KAAQ+E,EAC7CA,EAAc/E,GACL,IAAViF,GACAjF,KAAQ6E,EACLA,EAAe7E,GAElBkE,CAAmB,IAGN,iBAAVa,GAAsBA,IAAUb,EACzC,OAAOE,EAA0BU,GAMjC,MAJsC,CACpC,CAACJ,EAAUpD,WAAa,GAAEwD,EAAaH,KAAK,OAC5C9E,WAAY6E,EAAUpD,UAG1B,GAIgB,EAElB4D,EAAWd,IAiBjB,MAAO,CAACc,EAfgBC,IACtB,MAAMC,EAAmB,CAACD,GAAOD,GAC9BG,KAAKF,GAAQT,EAAUtC,uBAAuB+C,GAAKG,MAAM,OACzDC,OAEH,IAAIC,EAASN,EAOb,OANAE,EAAiBJ,SAAShF,IACpBA,GAAQA,EAAK2C,OAAS,IACxB6C,EAAUA,IAA6BxF,GACzC,IAGKwF,CAAM,EAGkB"}